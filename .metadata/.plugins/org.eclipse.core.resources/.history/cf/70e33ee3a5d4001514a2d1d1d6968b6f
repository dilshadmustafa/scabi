package com.dilmus.scabi;

import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Request;
import javax.ws.rs.core.Response;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;

@Path("/")
public class App {

   @GET
   @Path("/")
   public String get() { return "hello world"; }

   @POST
   @Path("/Meta/Compute/Alloc")
   //@Consumes("application/json")
   public String get(String request) {
	   //Response response = Response.status(200).entity("Response is here").build();
	   return "Response is here : " + request;
   }

   public static void main(String[] args) throws Exception 
   {
       ServletHolder sh = new ServletHolder();
       sh.
       sh.setInitParameter("org.restlet.application",App.class.getCanonicalName()); 
       
       
       Server server = new Server(8182);
       ServletContextHandler context = new ServletContextHandler(
                       ServletContextHandler.SESSIONS);
       context.setContextPath("/");
       server.setHandler(context);
       context.addServlet(sh, "/*");
       server.start(); 
 
	   
	   
	   
	   
	  /* 
      TJWSEmbeddedJaxrsServer tjws = new TJWSEmbeddedJaxrsServer();
      if (null == tjws ) { System.out.println("tjws"); }
      tjws.setPort(8182);
      tjws.setRootResourcePath("/");
      
      if (null == tjws.getDeployment() ) { System.out.println("tjws.getDeployment()"); }
      if (null == tjws.getDeployment().getRegistry() ) { System.out.println("tjws.getDeployment().getRegistry()"); }
      
      //tjws.getDeployment().getDispatcher().getRegistry().addPerRequestResource(App.class);
      //tjws.getDeployment().getDispatcher().getRegistry().addSingletonResource(new MyTestResource());
      tjws.getDeployment().getActualResourceClasses().add(App.class);

     
      tjws.start();
   	  */
   }
}